{% extends 'blog_page.html' %}

{% block body %}
  <div>
    <h1>
      {% block title %}
        {{ object.title }}
      {% endblock %}
    </h1>
      
    <p>
      <a href="{% url 'other_profile' post.author %}">{{ post.author }}</a> | {{ post.created_at }}
      {% if request.user == post.author %}
        | <a href="{% url 'post_edit' post.author post.slug %}">Modifier</a>
        | <a href="{% url 'post_delete' post.author post.slug %}">Supprimer</a>
      {% endif %}
    </p>

    <p>{{ object.content|safe }}</p>

    <div>
      <h3>Commentaires</h3>
      
      {% if user.is_authenticated %}
        <form method="post">
        {% csrf_token %}
          <div>
            <label for="content">Commentaire</label>
            <textarea name="content" id="content" cols="30" rows="10"></textarea>
          </div>
          <div>
            <button type="submit">Envoyer</button>
          </div>
      </form>
      {% else %}
        <p>Connectez vous pour laisser un commentaire</p>
      {% endif %}
        
      
      {% for comment in post.comments.all %}
        <div>
          <blockquote>{{ comment.author }} | {{ comment.created_at }}</blockquote>
          <p>{{ comment.content }}</p>
        </div>
      {% empty %}
        <p>Aucun commentaire</p>
      {% endfor %}
    </div>
  </div>
{% endblock %}
