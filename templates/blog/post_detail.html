{% extends 'blog_page.html' %}

{% block body %}
  <div class="w-full m-8 md:m-12 flex flex-col items-center">
    <h1 class="text-4xl text-slate-700 pb-10 font-bold">
      {% block title %}
        {{ object.title }}
      {% endblock %}
    </h1>
      
    <p class="text-lg mb-4">
      <a href="{% url 'other_profile' post.author %}" class="text-blue-600">{{ post.author }}</a> | {{ post.created_at }}
      {% if request.user == post.author %}
        | <a href="{% url 'post_edit' post.author post.slug %}" class="text-teal-700">Modifier</a>
        | <a href="{% url 'post_delete' post.author post.slug %}" class="text-teal-700">Supprimer</a>
      {% endif %}
    </p>

    <p class="text-sky-800 h-8 mb-8">
      |
      {% for tag in post.tags.all %}
          {{tag.name}} | 
      {% empty %}
          Pas de tags
      {% endfor %}
    </p>

    <p class="md:w-[900px] text-lg">
      {{ object.content|safe }}
    </p>

    <div class="mt-20">
      {% if user.is_authenticated %}
        <form method="post">
          {% csrf_token %}
          <label for="content">Laissez un commentaire: </label>
          <br/>
          <textarea name="content" id="content" cols="30" rows="3" class="rounded-xl md:w-[580px]"></textarea>
          <button type="submit" class="text-2xl text-slate-200 bg-slate-600 border border-slate-700 px-2 rounded-lg md:mx-2">
            Envoyer
          </button>
        </form>
      {% else %}
        <p>Connectez vous pour laisser un commentaire</p>
      {% endif %}
      
    </div>
      
    <div class="mt-10 flex flex-col items-center">
      {% for comment in post.comments.all %}
      <div class="mb-4 w-[300px] md:w-[700px] min-h-[70px] bg-slate-200 border rounded-xl p-2 text-slate-900">
        <p>
          <a href="{% url 'other_profile' post.author %}" class="text-slate-800 font-bold text-lg">
            {{ comment.author }} 
          </a> 
            | {{comment.created_at }}
          </p>
        <p>{{ comment.content }}</p>
      </div>
      {% empty %}
        <p>Aucun commentaire</p>
      {% endfor %}
    </div>
  </div>
{% endblock %}
